[gd_scene load_steps=44 format=2]

[ext_resource path="res://Assets/World/TileMap.png" type="Texture" id=1]
[ext_resource path="res://Assets/Characters/Player.png" type="Texture" id=2]
[ext_resource path="res://Player.gd" type="Script" id=3]
[ext_resource path="res://Assets/World/Crate.png" type="Texture" id=4]
[ext_resource path="res://RigidBody2D.gd" type="Script" id=5]
[ext_resource path="res://Assets/Characters/Enemy.png" type="Texture" id=6]
[ext_resource path="res://Enemy.gd" type="Script" id=7]
[ext_resource path="res://Assets/World/Coin.png" type="Texture" id=8]

[sub_resource type="ConvexPolygonShape2D" id=1]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=2]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=3]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=4]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=5]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=6]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=7]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=8]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=9]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=10]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=11]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=12]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=13]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=14]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=15]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="ConvexPolygonShape2D" id=16]
points = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[sub_resource type="TileSet" id=17]
0/name = "TileMap.png 0"
0/texture = ExtResource( 1 )
0/tex_offset = Vector2( 0, 0 )
0/modulate = Color( 1, 1, 1, 1 )
0/region = Rect2( 0, 0, 64, 64 )
0/tile_mode = 2
0/autotile/icon_coordinate = Vector2( 0, 0 )
0/autotile/tile_size = Vector2( 16, 16 )
0/autotile/spacing = 0
0/autotile/occluder_map = [  ]
0/autotile/navpoly_map = [  ]
0/autotile/priority_map = [  ]
0/autotile/z_index_map = [  ]
0/occluder_offset = Vector2( 0, 0 )
0/navigation_offset = Vector2( 0, 0 )
0/shape_offset = Vector2( 0, 0 )
0/shape_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
0/shape = SubResource( 1 )
0/shape_one_way = false
0/shape_one_way_margin = 1.0
0/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 1 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 0, 1 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 2 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 0, 2 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 3 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 0, 3 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 4 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 1, 1 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 5 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 1, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 6 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 1, 2 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 7 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 1, 3 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 8 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 2, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 9 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 2, 1 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 10 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 2, 2 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 11 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 2, 3 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 12 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 3, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 13 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 3, 1 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 14 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 3, 2 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 15 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
}, {
"autotile_coord": Vector2( 3, 3 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 16 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
} ]
0/z_index = 0

[sub_resource type="AtlasTexture" id=18]
atlas = ExtResource( 8 )
region = Rect2( 0, 0, 10, 10 )

[sub_resource type="AtlasTexture" id=19]
atlas = ExtResource( 8 )
region = Rect2( 10, 0, 10, 10 )

[sub_resource type="AtlasTexture" id=20]
atlas = ExtResource( 8 )
region = Rect2( 20, 0, 10, 10 )

[sub_resource type="AtlasTexture" id=21]
atlas = ExtResource( 8 )
region = Rect2( 30, 0, 10, 10 )

[sub_resource type="SpriteFrames" id=22]
animations = [ {
"frames": [ SubResource( 18 ), SubResource( 19 ), SubResource( 20 ), SubResource( 21 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[sub_resource type="CapsuleShape2D" id=23]
radius = 6.50423
height = 0.203423

[sub_resource type="RectangleShape2D" id=24]
extents = Vector2( 6.33166, 8.89275 )

[sub_resource type="Animation" id=25]
length = 0.1
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=26]
length = 0.1
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 6 ]
}

[sub_resource type="Animation" id=27]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 1, 2, 3, 4, 5, 0 ]
}

[sub_resource type="RectangleShape2D" id=34]
extents = Vector2( 7.07021, 10.7124 )

[sub_resource type="RectangleShape2D" id=28]
extents = Vector2( 8.0135, 8.24961 )

[sub_resource type="AtlasTexture" id=29]
atlas = ExtResource( 6 )
region = Rect2( 0, 0, 32, 26 )

[sub_resource type="AtlasTexture" id=30]
atlas = ExtResource( 6 )
region = Rect2( 32, 0, 32, 26 )

[sub_resource type="AtlasTexture" id=31]
atlas = ExtResource( 6 )
region = Rect2( 64, 0, 32, 26 )

[sub_resource type="SpriteFrames" id=32]
animations = [ {
"frames": [ SubResource( 29 ), SubResource( 30 ), SubResource( 31 ) ],
"loop": true,
"name": "enemy_walk",
"speed": 7.0
} ]

[sub_resource type="RectangleShape2D" id=33]
extents = Vector2( 12.2836, 5.11745 )

[sub_resource type="RectangleShape2D" id=35]
extents = Vector2( 13.5214, 6.2644 )

[node name="Game" type="Node2D" groups=[
"bodies",
]]

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource( 17 )
cell_size = Vector2( 16, 16 )
format = 1
tile_data = PoolIntArray( 19, 536870912, 0, 65555, 536870912, 0, 131091, 536870912, 0, 196627, 536870912, 0, 262155, 0, 0, 262163, 536870912, 0, 327699, 536870912, 0, 393222, 0, 0, 393235, 536870912, 0, 458771, 536870912, 0, 524307, 536870912, 0, 655351, 536870912, 0, 655352, 536870912, 0, 655353, 536870912, 0, 655354, 536870912, 0, 655355, 536870912, 0, 655356, 536870912, 0, 655357, 536870912, 0, 655358, 536870912, 0, 655359, 536870912, 0, 589824, 536870912, 0, 589825, 536870912, 0, 589826, 536870912, 0, 589827, 536870912, 0, 589828, 536870912, 0, 589829, 536870912, 0, 589830, 536870912, 0, 589831, 536870912, 0, 589832, 536870912, 0, 589833, 536870912, 0, 589834, 536870912, 0, 589835, 536870912, 0, 589836, 536870912, 0, 589837, 536870912, 0, 589838, 536870912, 0, 589839, 536870912, 0, 589840, 536870912, 0, 589841, 536870912, 0, 589842, 536870912, 0, 589843, 536870912, 0, 720887, 536870912, 65537, 720888, 536870912, 65537, 720889, 536870912, 65537, 720890, 536870912, 65537, 720891, 536870912, 65537, 720892, 536870912, 65537, 720893, 536870912, 65537, 720894, 536870912, 65537, 720895, 536870912, 65537, 655360, 536870912, 65537, 655361, 536870912, 65537, 655362, 536870912, 65537, 655363, 536870912, 65537, 655364, 536870912, 65537, 655365, 536870912, 65537, 655366, 536870912, 65537, 655367, 536870912, 65537, 655368, 536870912, 65537, 655369, 536870912, 65537, 655370, 536870912, 65537, 655371, 536870912, 65537, 655372, 536870912, 65537, 655373, 536870912, 65537, 655374, 536870912, 65537, 655375, 536870912, 65537, 655376, 536870912, 65537, 655377, 536870912, 65537, 655378, 536870912, 65537, 655379, 536870912, 0 )

[node name="Coin" type="Area2D" parent="."]
position = Vector2( 138.659, 29.5047 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="Coin"]
frames = SubResource( 22 )
playing = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Coin"]
shape = SubResource( 23 )

[node name="Player" type="KinematicBody2D" parent="."]
position = Vector2( 109.338, 78.2971 )
collision_layer = 2
script = ExtResource( 3 )
max_speed = 120

[node name="Sprite" type="Sprite" parent="Player"]
texture = ExtResource( 2 )
hframes = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
position = Vector2( 0.546654, 0.859025 )
shape = SubResource( 24 )

[node name="Camera2D" type="Camera2D" parent="Player"]
current = true

[node name="Player Animation" type="AnimationPlayer" parent="Player"]
anims/Idle = SubResource( 25 )
anims/Jump = SubResource( 26 )
anims/Run = SubResource( 27 )

[node name="Hurtbox" type="Area2D" parent="Player"]
position = Vector2( 0.409, 0 )
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/Hurtbox"]
rotation = 0.00311223
shape = SubResource( 34 )

[node name="Player HP" type="Label" parent="Player"]
margin_left = -156.122
margin_top = -85.3147
margin_right = -116.122
margin_bottom = -71.3147
text = "5 hp"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Crate" type="RigidBody2D" parent="."]
position = Vector2( 51.761, 39.6564 )
script = ExtResource( 5 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Crate"]
position = Vector2( 0.125, 0.125 )
shape = SubResource( 28 )

[node name="Sprite" type="Sprite" parent="Crate"]
z_index = -999
texture = ExtResource( 4 )

[node name="Enemy" type="KinematicBody2D" parent="."]
position = Vector2( 214.955, 137.555 )
collision_layer = 4
script = ExtResource( 7 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="Enemy"]
frames = SubResource( 32 )
animation = "enemy_walk"
frame = 2
playing = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy"]
position = Vector2( 0, 1 )
shape = SubResource( 33 )

[node name="FloorHit" type="RayCast2D" parent="Enemy"]
position = Vector2( -12, 3 )
enabled = true
cast_to = Vector2( 0, 10 )

[node name="Wall Hit" type="RayCast2D" parent="Enemy"]
enabled = true
cast_to = Vector2( -15, 0 )

[node name="Hitbox" type="Area2D" parent="Enemy"]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy/Hitbox"]
shape = SubResource( 35 )

[connection signal="area_entered" from="Player/Hurtbox" to="Player" method="_on_Hurtbox_area_entered"]
